(this.webpackJsonpdual_track_frontend=this.webpackJsonpdual_track_frontend||[]).push([[3],{89:function(e,t,n){"use strict";t.a=function(e){var t=e.condition,n=void 0===t||t,s=e.children;return n?s:null}},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return d}));var s=n(33),c=n(2),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string";if("object"===t){var n=localStorage.getItem(e)||"{}";return JSON.parse(n)}var s=localStorage.getItem(e);return s&&"null"!==s?s:null},a=function(e,t){var n=t-e/1e3;return n<-8?"has-text-danger":n<-4?"has-text-warning":"has-text-success"},r=function(e){return i("liveSegmentData-".concat(e),"object")},o=function(e,t,n){var s=i("liveSegmentData-".concat(e),"object")[t];return s&&s[n]||{}},l=function(e,t,n,a){var r=i("liveSegmentData-".concat(e),"object"),o=r[t]||{},l=Object(c.a)(Object(c.a)({},o),{},Object(s.a)({},n,a)),u=JSON.stringify(Object(c.a)(Object(c.a)({},r),{},Object(s.a)({},t,l)));localStorage.setItem("liveSegmentData-".concat(e),u)},u=function(e){localStorage.removeItem("liveSegmentData-".concat(e))},d=function(e,t){return!(!e||!t)&&t.findIndex((function(t){return t.identifier===e}))===t.length-1}},96:function(e,t,n){"use strict";n.r(t);var s=n(33),c=n(2),i=n(14),a=n(1),r=n(9),o=n(35),l=n(89),u=n(97);function d(e){var t=e/36e5,n=60*(t-Math.floor(t)),s=Math.floor(n),c=60*(n-s),i=Math.floor(c),a=100*(c-i),r=Math.floor(a),o=s.toString().padStart(2,"0"),l=i.toString().padStart(2,"0"),u=r.toString().padStart(2,"0");return"".concat(o,":").concat(l,":").concat(u)}function m(){return Object(u.a)()}var j=n(4),h=n(23),b=n(90),f=n(0),O=function(e){var t=e.selectedWorkout,n=e.setActiveTab,s=t.identifier,c=Object(j.f)().email,i=Object(b.b)(s);if(!i||!Object.keys(i).length)return Object(f.jsx)("div",{className:"is-size-3 has-text-centered",children:"You have not run this workout before"});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"button",tabIndex:0,onClick:function(){Object(b.f)(s),n("current")},children:"Clear History"}),Object(f.jsx)("div",{className:"columns",children:Object.keys(i).map((function(e,t){var n=i[e];return Object(f.jsx)("div",{className:"column",children:Object(f.jsxs)("div",{className:"card mt-2",children:[Object(f.jsxs)("div",{className:"is-size-5 has-text-centered pt-2",children:["Session #",t+1]}),Object(f.jsx)("hr",{className:"mt-2 mb-2"}),Object(f.jsx)("div",{className:"card-content pt-1",children:Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)("table",{className:"table is-bordered",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Segment"}),Object(f.jsx)("th",{children:"Goal"}),Object(f.jsx)("th",{children:"Finish Time"})]})}),Object(f.jsx)("tbody",{children:Object.keys(n).map((function(e){var t=n[e][c];return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.displayLength}),Object(f.jsx)("td",{children:d(t.timeGoal)}),Object(f.jsx)("td",{className:"pb-1 pb-1 ".concat(Object(b.d)(t.finishTime,t.timeGoal)),children:d(t.finishTime)})]},e)}))})]})})})]})},e)}))})]})},g=n(91),x=n(16),v=n(17),p=n(18),k=n(19),S=n(92),y=n.n(S),N=n(5),w=n.n(N),I=n(10),C=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1];if(!("wakeLock"in navigator))return null;var u=function(){var e=Object(I.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.wakeLock.request("screen");case 3:t=e.sent,s(t),l(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("".concat(e.t0.name,", ").concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),d=function(){n&&n.release(),s(null),l(!1)};return Object(f.jsx)(f.Fragment,{children:o?Object(f.jsx)("div",{className:"button",tabIndex:"0",onClick:d,onKeyUp:function(e){return"Enter"===e.key&&d()},children:"Unlock Page"}):Object(f.jsx)("div",{className:"button",tabIndex:"0",onClick:u,onKeyUp:function(e){return"Enter"===e.key&&u()},children:"Lock Page"})})},F=function(){var e=Object(a.useState)(!!document.fullscreenElement),t=Object(i.a)(e,2),n=t[0],s=t[1],c=function(){document.documentElement.requestFullscreen(),s(!0)},r=function(){document.exitFullscreen(),s(!1)};return Object(f.jsx)(f.Fragment,{children:n?Object(f.jsx)("div",{className:"button",tabIndex:"0",onClick:r,onKeyUp:function(e){return"Enter"===e.key&&r()},children:"Leave Full Screen"}):Object(f.jsx)("div",{className:"button",tabIndex:"0",onClick:c,onKeyUp:function(e){return"Enter"===e.key&&c()},children:"Enter Full Screen"})})},W=function(e){var t=e.members,n=Object(j.f)().email;return!t||t.count<2?null:Object(f.jsx)("div",{children:Object.values(t).map((function(e){var t=e.email===n?"is-link":"is-light";return Object(f.jsx)("div",{className:"tag mr-1 mb-1 ".concat(t),children:e.email},e.email)}))})},D=function(e){var t=e.open,n=e.members,s=e.chatHistory,c=e.closeChat,i=e.message,a=e.setMessage,r=e.sendMessage,o=Object(j.f)().email;return!t||!n||Object.values(n).length<2?null:Object(f.jsxs)("div",{className:"chat-interface box has-background-link-light p-5",children:[Object(f.jsx)("div",{tabIndex:0,className:"delete is-clickable is-size-3 close-chat-interface",onClick:c,onKeyUp:function(e){return"Enter"===e.key&&c()},dangerouslySetInnerHTML:{__html:"&#215;"}}),Object(f.jsx)(W,{members:n}),Object(f.jsxs)("div",{className:"chat-messages box mt-2 p-3",children:[Object(f.jsx)("div",{className:"is-full-width is-flex is-justify-content-center mb-4",children:Object(f.jsx)("div",{className:"tag is-dark",children:"This is the beginning of your conversation history"})}),s.map((function(e,t){return e.sender===o?Object(f.jsx)("div",{className:"is-full-width is-flex is-justify-content-flex-end mb-2",children:Object(f.jsx)("div",{className:"tag is-medium is-link from-me-message is-pulled-right",children:e.message})},"chat-me-".concat(t)):Object(f.jsx)("div",{className:"mb-2",children:Object(f.jsx)("div",{className:"tag is-medium is-light to-me-message",children:e.message})},"chat-others-".concat(t))})),Object(f.jsx)("div",{id:"last-chat-element"})]}),Object(f.jsx)("div",{className:"chat-send-box box mt-2 p-3 mb-2",children:Object(f.jsxs)("div",{className:"is-flex",children:[Object(f.jsx)("input",{className:"input is-normal",type:"text",placeholder:"Enter your message",value:i,onChange:function(e){return a(e.target.value)},onKeyUp:function(e){return"Enter"===e.key&&r()}}),Object(f.jsx)("div",{className:"button is-primary ml-2",tabIndex:0,onClick:r,disabled:!i||!i.length,children:"Send"})]})})]})},E=function(e){var t=e.showChat,n=e.channel,s=e.chatHistory,c=e.setChatHistory,r=e.unreadMessage,o=e.setUnreadStatus,l=e.members,u=Object(a.useState)(!1),d=Object(i.a)(u,2),m=d[0],h=d[1],b=Object(a.useState)(""),O=Object(i.a)(b,2),x=O[0],v=O[1],p=Object(j.f)().email;if(Object(a.useEffect)((function(){var e=document.getElementById("last-chat-element");e&&e.scrollIntoView()}),[s,m]),Object(a.useEffect)((function(){var e=function(e){27===e.keyCode&&k(!1)};m?document.addEventListener("keydown",e,!1):document.removeEventListener("keydown",e,!1)}),[m]),!n||!t)return null;var k=function(){m?document.body.classList.remove("not-vertically-scrollable"):(o(!1),document.body.classList.add("not-vertically-scrollable")),h(!m)};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("button",{className:"button",tabIndex:0,onClick:k,disabled:Object.values(l).length<2,onKeyUp:function(e){return"Enter"===e.key&&k()},children:["Workout Chat",r&&Object(f.jsx)("div",{className:"dot ml-1 has-background-primary"})]}),Object(f.jsx)(D,{open:m,members:l,chatHistory:s,closeChat:function(){k(!1)},message:x,setMessage:v,sendMessage:function(){if(x&&x.length){var e={id:s.length+1,sender:p,message:x,timestamp:Date.now()};n.trigger("client-chat-message",e),c([].concat(Object(g.a)(s),[e])),v("")}}})]})},M=n(36),R=function(e){var t=e.showFinish,n=void 0===t||t,s=e.onPlayCallback,c=void 0===s?function(){}:s,r=e.onStopCallback,o=void 0===r?function(){}:r,l=e.onFinishCallback,u=void 0===l?function(){}:l,m=Object(a.useState)(!1),j=Object(i.a)(m,2),h=j[0],b=j[1],O=Object(a.useState)(null),g=Object(i.a)(O,2),x=g[0],v=g[1],p=Object(a.useState)(0),k=Object(i.a)(p,2),S=k[0],y=k[1],N=Object(a.useState)(null),w=Object(i.a)(N,2),I=w[0],C=w[1],F=function(){h?(clearInterval(I),o()):(v(Date.now()-S),c()),b(!h)};Object(a.useEffect)((function(){F()}),[]),Object(a.useEffect)((function(){if(null===x)clearInterval(I),C(null),y(0);else{var e=setInterval((function(){y(null===x?0:Date.now()-x)}),10);C(e)}}),[x]);var W=function(){h&&(F(),u(S))};return Object(f.jsxs)("div",{className:"has-text-centered is-flex is-flex-direction-column is-align-items-center",children:[Object(f.jsx)("div",{className:"stopwatch-circle circle is-flex is-justify-content-center is-align-items-center",children:Object(f.jsx)("span",{className:"time is-size-4",id:"display",children:S?d(S):"00:00:00"})}),Object(f.jsxs)("div",{className:"mt-3 is-flex is-justify-content-space-between is-align-items-center",children:[Object(f.jsx)("img",{className:"is-clickable",tabIndex:0,id:"main-action-button",alt:h?"pause stopwatch":"start stopwatch",src:h?"https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/pause-button_pinhpy.svg":"https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/play-button_opkxmt.svg",onClick:F,onKeyUp:function(e){return"Enter"===e.key&&F()}}),n&&h&&Object(f.jsx)("div",{className:"button ml-5 is-medium",tabIndex:0,id:"reset-button",onClick:W,onKeyUp:function(e){return"Enter"===e.key&&W()},children:"Finish"})]})]})},T=function(e){var t=e.workoutStarted,n=e.startClick,s=e.onFinishCallback,c=e.showStopwatch;return t?Object(f.jsxs)(f.Fragment,{children:[!c&&Object(f.jsx)("div",{tabIndex:0,className:"button is-primary is-medium",onClick:n,children:"Start"}),Object(f.jsx)(l.a,{condition:c,children:Object(f.jsx)(R,{onFinishCallback:s})})]}):null},U=function(e){var t=e.segmentData;e.timeGoal;return Object.keys(t).length?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("table",{className:"table is-bordered",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"User"}),Object(f.jsx)("th",{children:"Finish Time"})]})}),Object(f.jsx)("tbody",{children:Object.keys(t).map((function(e){var n=t[e];return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e}),Object(f.jsx)("td",{className:"pb-1 pb-1 ".concat(Object(b.d)(n.finishTime,n.timeGoal)),children:d(n.finishTime)})]},e)}))})]})}):null},_=function(e){Object(p.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(x.a)(this,n);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={minutesRemaining:0,secondsRemaining:0,goalInMS:(new Date).getTime()+1e3*e.props.amount},e.calculateMinutesRemaining=function(){var t=(new Date).getTime(),n=e.state.goalInMS-t;return Math.floor(n%36e5/6e4)},e.tick=function(){e.setState({minutesRemaining:e.calculateMinutesRemaining(),secondsRemaining:e.calculateSecondsRemaining()},(function(){e.state.secondsRemaining<=0&&e.state.minutesRemaining<=0&&(clearInterval(e.interval),e.props.onFinish&&e.props.onFinish())}))},e.componentDidMount=function(){e.tick(),e.interval=setInterval(e.tick,1e3)},e.componentWillUnmount=function(){clearInterval(e.interval)},e}return Object(v.a)(n,[{key:"calculateSecondsRemaining",value:function(){var e=(new Date).getTime(),t=this.state.goalInMS-e;return Math.floor(t%6e4/1e3)}},{key:"textColor",get:function(){return 0===this.state.minutesRemaining&&this.state.secondsRemaining<30?"has-text-danger":""}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:this.textColor,children:[this.state.minutesRemaining,":",this.state.secondsRemaining," left"]})}}]),n}(a.PureComponent),L=function(e){var t=e.restFinished,n=e.rest,s=e.showRestTimer,c=e.onRestFinish;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("b",{className:"is-size-5",children:"Rest"}),Object(f.jsx)("br",{}),Object(f.jsx)(l.a,{condition:!t,children:s?Object(f.jsx)(_,{amount:n,onFinish:c}):Object(f.jsxs)("span",{children:[n," seconds"]})}),Object(f.jsx)(l.a,{condition:t,children:Object(f.jsx)("div",{className:"has-text-success",children:"Get ready for the next segment!"})})]})},H=function(e){var t=e.segment,n=e.segmentsLength,s=e.showStopwatch,c=e.toggleStopwatch,r=e.segmentData,o=e.index,u=e.workoutStarted,d=e.segmentIdentifier,m=e.allResultsIn,h=Object(a.useState)(!1),b=Object(i.a)(h,2),O=b[0],g=b[1],x=Object(a.useState)(!1),v=Object(i.a)(x,2),p=v[0],k=v[1],S=Object(j.f)().email;if(Object(a.useEffect)((function(){g(!1),k(!1)}),[d]),!t)return null;var y=!!r[S];return Object(f.jsx)("div",{className:"mt-2",children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsxs)("div",{className:"segment-position",children:[o+1," / ",n]}),Object(f.jsx)("div",{className:"card-content pt-1",children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsxs)("div",{className:"columns mt-1 is-flex",children:[Object(f.jsxs)("div",{className:"column is-half",children:[Object(f.jsxs)("b",{className:"is-size-5",children:[t.display_length," Goal"]}),Object(f.jsx)("br",{}),t.time_goal," seconds"]}),Object(f.jsx)("div",{className:"column is-half",children:Object(f.jsx)(L,{rest:t.rest,showRestTimer:O,onRestFinish:function(){g(!1),k(!0)},restFinished:p})})]}),Object(f.jsx)(l.a,{condition:!y,children:Object(f.jsx)(T,{showStopwatch:s,startClick:function(){c(!s)},onFinishCallback:function(e){c(!1,e),g(!0)},workoutStarted:u})}),Object(f.jsx)(U,{segmentData:r,timeGoal:t.time_goal}),Object(f.jsxs)(l.a,{condition:!m,children:[Object(f.jsx)("hr",{}),Object(f.jsx)("p",{children:t.description})]})]})})]})})},z=function(e){var t=e.segments,n=e.segmentsLength,s=e.segmentIdentifier,i=Object(M.a)(e,["segments","segmentsLength","segmentIdentifier"]);if(!n)return null;var a=t.find((function(e){return e.identifier===s})),r=t.findIndex((function(e){return e.identifier===s}));return Object(f.jsx)(H,Object(c.a)({index:r,segment:a,segmentsLength:n,segmentIdentifier:s,workoutStarted:!0},i))},G=function(e){var t=e.segment;return Object(f.jsx)("div",{className:"column is-one-third",children:Object(f.jsx)("div",{className:"card",children:Object(f.jsx)("div",{className:"card-content pt-1",children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsxs)("div",{className:"columns mt-1 is-flex",children:[Object(f.jsxs)("div",{className:"column is-half",children:[Object(f.jsxs)("b",{className:"is-size-5",children:[t.display_length," Goal"]}),Object(f.jsx)("br",{}),t.time_goal," seconds"]}),Object(f.jsxs)("div",{className:"column is-half",children:[Object(f.jsx)("b",{className:"is-size-5",children:"Rest"}),Object(f.jsx)("br",{}),t.rest," seconds"]})]}),Object(f.jsx)("hr",{}),Object(f.jsx)("p",{children:t.description})]})})})})},K=function(e){var t=e.selectedWorkout,n=e.segmentIdentifier,s=e.segmentData,c=e.showStopwatch,i=e.toggleStopwatch,a=Object(M.a)(e,["selectedWorkout","segmentIdentifier","segmentData","showStopwatch","toggleStopwatch"]),r=Object(j.f)().email;if(!t.segments.length)return Object(f.jsx)("p",{className:"mb-3",children:"Workout cannot start. No segments added yet :("});var o=t.segments,u=o.length,d=!!s[r],m=Object.keys(s).length===Object.keys(a.members).length;return n?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.a,{condition:d&&m,children:Object(f.jsx)("div",{className:"button is-primary mt-2 mb-1",tabIndex:0,onClick:a.onNextClick,children:Object(b.e)(n,o)?"Conclude Workout":"Next Segment"})}),Object(f.jsx)(z,{segments:o,segmentsLength:u,segmentIdentifier:n,segmentData:s,showStopwatch:c,toggleStopwatch:i,allResultsIn:m})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"is-size-3 mb-5",children:[u," Total ",1===u?"Segment":"Segments"]}),Object(f.jsx)("div",{className:"segments columns",children:o.map((function(e){return Object(f.jsx)(G,{segment:e},e.identifier)}))})]})},A=function(e){Object(p.a)(n,e);var t=Object(k.a)(n);function n(e){var s;return Object(x.a)(this,n),(s=t.call(this,e)).setChatHistory=function(e){s.setState({chatHistory:e})},s.setUnreadStatus=function(e){s.setState({unreadMessage:e})},s.startWorkoutWrapper=function(){s.props.startWorkout(s.channel)},s.toggleStopwatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)s.channel.trigger("client-segment-started",{});else{var n=s.props.selectedWorkout.segments.find((function(e){return e.identifier===s.props.segmentIdentifier})),c={email:s.props.email,results:{finishTime:t,timeGoal:n.time_goal,displayLength:n.display_length}};s.channel.trigger("client-segment-finished",c),s.props.mirrorSegmentData(c)}s.setState({showStopwatch:e})},s.onNextClick=function(){s.props.mirrorNextSegment(),s.channel.trigger("client-segment-next",{})},s.state={chatHistory:[],unreadMessage:!1,members:[],showChat:!1,showStopwatch:!1},y.a.logToConsole=!1,s.pusher=new y.a("cebc878343c66e63a78e",{cluster:"us3",authEndpoint:"".concat("https://glacial-plateau-65219.herokuapp.com","/pusher/auth"),auth:{headers:{Authorization:localStorage.getItem("currentUserToken")||""}}}),s.channel=s.pusher.subscribe("presence-workoutChannel-".concat(s.identifier)),s}return Object(v.a)(n,[{key:"identifier",get:function(){return this.props.selectedWorkout.identifier}},{key:"componentDidMount",value:function(){var e=this;this.channel.bind("pusher:subscription_succeeded",(function(e){this.setState({members:e.members,showChat:!0})}),this),this.channel.bind("pusher:member_added",(function(e){var t=Object(c.a)(Object(c.a)({},this.state.members),{},Object(s.a)({},e.id,e.info));this.setState({members:t})}),this),this.channel.bind("pusher:member_removed",(function(e){var t=this,n=Object.keys(this.state.members).filter((function(t){return"".concat(t)!=="".concat(e.id)})).reduce((function(e,n){return e[n]=t.state.members[n],e}),{});this.setState({members:n})}),this),this.channel.bind("client-chat-message",(function(t){e.setState({chatHistory:[].concat(Object(g.a)(e.state.chatHistory),[Object(c.a)({},t)]),unreadMessage:!0})}),this),this.channel.bind("client-workout-started",(function(t){e.props.mirrorWorkout(t)}),this),this.channel.bind("client-segment-started",(function(t){e.setState({showStopwatch:!0})}),this),this.channel.bind("client-segment-finished",(function(t){e.props.mirrorSegmentData(t)}),this),this.channel.bind("client-segment-next",(function(t){e.props.mirrorNextSegment()}),this)}},{key:"componentWillUnmount",value:function(){this.pusher.unsubscribe("presence-workoutChannel-".concat(this.identifier)),this.channel&&this.channel.unbind(),this.pusher.disconnect(),document.body.classList.remove("not-vertically-scrollable")}},{key:"showStartWorkoutButton",get:function(){return!this.props.workoutStarted&&!!this.props.selectedWorkout.segments.length}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"buttons",children:[Object(f.jsx)(l.a,{condition:this.showStartWorkoutButton,children:Object(f.jsx)("div",{tabIndex:0,className:"button is-primary",onClick:this.startWorkoutWrapper,children:"Start Workout"})}),Object(f.jsx)(C,{}),Object(f.jsx)(F,{})]}),Object(f.jsxs)(l.a,{condition:Object.values(this.state.members).length>1,children:[Object(f.jsx)(E,Object(c.a)({channel:this.channel,setChatHistory:this.setChatHistory,setUnreadStatus:this.setUnreadStatus},this.state)),Object(f.jsx)(W,{members:this.state.members})]}),Object(f.jsx)(K,{selectedWorkout:this.props.selectedWorkout,segmentIdentifier:this.props.segmentIdentifier,segmentData:this.props.segmentData,showStopwatch:this.state.showStopwatch,toggleStopwatch:this.toggleStopwatch,members:this.state.members,onNextClick:this.onNextClick})]})}}]),n}(a.Component);t.default=function(e){var t=e.match.params.identifier,n=Object(j.f)(),u=n.selectedWorkout,d=n.error,g=n.loading,x=n.email,v=Object(j.e)(),p=Object(a.useState)("current"),k=Object(i.a)(p,2),S=k[0],y=k[1],N=Object(b.a)("liveSessionIdentifier","string"),w=Object(b.a)("liveWorkoutIdentifier","string"),I=!!N&&t===w,C=Object(a.useState)(I),F=Object(i.a)(C,2),W=F[0],D=F[1],E=I?N:null,M=Object(a.useState)(E),R=Object(i.a)(M,2),T=R[0],U=R[1],_=Object(b.a)("liveSegmentIdentifier","string"),L=Object(a.useState)(_),H=Object(i.a)(L,2),z=H[0],G=H[1],K=Object(b.c)(t,T,z),P=Object(a.useState)(K),J=Object(i.a)(P,2),B=J[0],q=J[1],V=function(e,t,n){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];localStorage.setItem("liveSessionIdentifier",e),localStorage.setItem("liveWorkoutIdentifier",t),localStorage.setItem("liveSegmentIdentifier",n),D(s),U(e),G(n),q({})};return Object(a.useEffect)((function(){Object(h.b)(t,v)}),[t,v]),g?Object(f.jsx)(o.a,{spaceTop:"mt-5"}):u&&Object.keys(u).length?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"pattern-cross-dots-xl is-flex is-align-items-center is-justify-content-center neg-ml-5 neg-mr-5 border-bottom-primary-1 is-flex-direction-column",children:[Object(f.jsx)("div",{className:"tag is-medium mt-2 mb-2",children:u.name}),Object(f.jsx)(l.a,{condition:W,children:Object(f.jsx)("div",{className:"tag is-small is-primary mb-2",children:"Active"},T)})]}),Object(f.jsx)(l.a,{condition:!W,children:Object(f.jsx)("div",{className:"tabs is-medium",children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{className:"current"===S?"is-active":void 0,children:Object(f.jsx)("a",{className:"tab",onClick:function(){return y("current")},children:"Current"})}),Object(f.jsx)("li",{className:"previous"===S?"is-active":void 0,children:Object(f.jsx)("a",{className:"tab",onClick:function(){return y("previous")},children:"Previous Sessions"})})]})})}),Object(f.jsxs)("div",{className:"ml-5 mr-5 mt-2",children:["current"===S&&Object(f.jsx)(A,{selectedWorkout:u,workoutStarted:W,startWorkout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=m(),s=u.segments[0].identifier;V(n,t,s),e&&e.trigger("client-workout-started",{uuid:n,identifier:t,currentSegmentIdentifier:s})},mirrorWorkout:function(e){V(e.uuid,e.identifier,e.currentSegmentIdentifier)},segmentIdentifier:z,segmentData:B,mirrorSegmentData:function(e){q(Object(c.a)(Object(c.a)({},B),{},Object(s.a)({},e.email,e.results)))},mirrorNextSegment:function(){var e,n=u.segments.findIndex((function(e){return e.identifier===z}));e=n+1>=u.segments.length?null:u.segments[n+1].identifier,localStorage.setItem("liveSegmentIdentifier",e),Object(b.g)(t,T,z,B),G(e),q({}),null===e&&(V(null,null,null,!1),y("previous"))},email:x}),"previous"===S&&Object(f.jsx)(O,{selectedWorkout:u,setActiveTab:y})]})]}):Object(f.jsxs)("div",{className:"has-text-centered",children:[Object(f.jsx)("h1",{className:"is-size-3",children:d}),Object(f.jsx)(r.b,{to:"/workouts",className:"button mt-3",children:"Return to My Workouts"})]})}}}]);
//# sourceMappingURL=3.ce1c6b63.chunk.js.map