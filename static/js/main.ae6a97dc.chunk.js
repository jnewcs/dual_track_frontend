(this.webpackJsonpdual_track_frontend=this.webpackJsonpdual_track_frontend||[]).push([[0],{4:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(6),i=n.n(a),c=n(10),r=n(49),s={success:!0},o={success:!1};function l(e,t,n){return e({type:"REQUEST_LOGIN"}),r.post("".concat("https://glacial-plateau-65219.herokuapp.com","/login")).send(n).set("Content-Type","application/json").set("Accept","application/json").end((function(n,a){var i,c,r=null===a||void 0===a||null===(i=a.body)||void 0===i?void 0:i.email;if(!n&&r){var l=a.headers.Authorization||a.headers.authorization;return e({type:"LOGIN_SUCCESS",payload:{email:r,token:l}}),localStorage.setItem("currentUserEmail",r),localStorage.setItem("currentUserToken",l),e({type:"TOGGLE_NOTIFICATION",notification:{text:"Logged in successfully!",type:"info"}}),t.push("/dashboard"),s}return e({type:"LOGIN_ERROR",error:(null===a||void 0===a||null===(c=a.body)||void 0===c?void 0:c.message)||"Unhandled error while logging in :("}),o}))}function d(e){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("currentUserToken")||"",e.abrupt("return",r.get("".concat("https://glacial-plateau-65219.herokuapp.com","/users/check")).set("Content-Type","application/json").set("Accept","application/json").set("Authorization",n).end((function(e,n){j(n,t)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return 401===e.statusCode&&(b(t),t({type:"TOGGLE_NOTIFICATION",notification:{text:"No longer signed in :( Please login to continue",type:"warning"}}),!0)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),localStorage.removeItem("currentUserEmail"),localStorage.removeItem("currentUserToken");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=n(12),v=n(1),p=n(3),m={email:localStorage.getItem("currentUserEmail")||"",token:localStorage.getItem("currentUserToken")||"",loading:!1,notification:null,errorMessage:null,updateAvailable:!1},f=function(e,t){switch(t.type){case"REQUEST_LOGIN":case"REQUEST_AUTH":return Object(p.a)(Object(p.a)({},e),{},{loading:!0,errorMessage:null});case"LOGIN_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{email:t.payload.email,token:t.payload.token,loading:!1,errorMessage:null});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{email:"",token:"",errorMessage:null});case"LOGIN_ERROR":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,errorMessage:t.error});case"RESET_ERROR":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,errorMessage:null});case"TOGGLE_UPDATE_AVAILABLE":return Object(p.a)(Object(p.a)({},e),{},{updateAvailable:t.updateAvailable});case"TOGGLE_NOTIFICATION":return Object(p.a)(Object(p.a)({},e),{},{notification:t.notification});default:throw new Error("Unhandled action type: ".concat(t.type))}},x=n(0),g=Object(v.createContext)(),N=Object(v.createContext)();function w(){var e=Object(v.useContext)(g);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}function k(){var e=Object(v.useContext)(N);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}var y=function(e){var t=e.children,n=Object(v.useReducer)(f,m),a=Object(O.a)(n,2),i=a[0],c=a[1];return Object(x.jsx)(g.Provider,{value:i,children:Object(x.jsx)(N.Provider,{value:c,children:t})})}},46:function(e,t,n){},47:function(e,t,n){},62:function(e,t){},79:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(37),r=n.n(c),s=n(13),o=n(3),l=(n(46),n(47),n(5)),d=n(40),u=n(4),j=n(0),b=function(e){e._history;var t=Object(u.e)(),n=Object(u.f)().email;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("h1",{className:"is-size-1 mb-5",children:"My Dashboard"}),Object(j.jsx)("div",{className:"buttons",children:Object(j.jsx)("button",{className:"button is-default",onClick:function(){return Object(u.b)(t)},children:"Check Auth :)"})})]}),Object(j.jsx)("p",{children:"Welcome to the dashboard ".concat(n,"!")})]})},h=n(6),O=n.n(h),v=n(10),p=n(12),m=function(e){var t=e.localEmail,n=e.setEmail,a=e.loading,i=e.password,c=e.setPassword,r=e.onClick,s=e.primaryText;return Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"field",children:[Object(j.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("input",{className:"input",autoComplete:"email",required:!0,type:"text",id:"email",disabled:a,value:t,onChange:function(e){return n(e.target.value)}})})]}),Object(j.jsxs)("div",{className:"field",children:[Object(j.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("input",{className:"input",autoComplete:"current-password",required:!0,type:"password",id:"password",disabled:a,value:i,onChange:function(e){return c(e.target.value)}})})]}),Object(j.jsx)("button",{type:"submit",className:"button is-primary mt-5 ".concat(a?"is-loading":void 0),onClick:r,disabled:a,children:s})]})},f=function(e){var t=e.history,n=Object(u.f)(),i=n.email,c=n.loading,r=n.errorMessage,s=Object(u.e)();Object(a.useEffect)((function(){i&&t.push("/dashboard")}),[i,t]);var l=Object(a.useState)(""),d=Object(p.a)(l,2),b=d[0],h=d[1],f=Object(a.useState)(""),x=Object(p.a)(f,2),g=x[0],N=x[1],w=Object(a.useState)("login"),k=Object(p.a)(w,2),y=k[0],E=k[1],T=function(){var e=Object(v.a)(O.a.mark((function e(n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a={user:{password:g,email:b}},Object(u.c)(s,t,a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={localEmail:b,password:g,setEmail:h,setPassword:N,loading:c},C=function(e){c||(s({type:"RESET_ERROR"}),E(e))};return Object(j.jsx)("div",{className:"columns is-centered",children:Object(j.jsxs)("div",{className:"column is-half",children:[r&&Object(j.jsx)("p",{className:"notification is-danger",children:r}),Object(j.jsx)("div",{className:"tabs is-medium",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{className:"login"===y?"is-active":void 0,children:Object(j.jsx)("a",{role:"menuitem",disabled:c,onClick:function(){return C("login")},children:"Login"})}),Object(j.jsx)("li",{role:"menuitem",className:"register"===y?"is-active":void 0,children:Object(j.jsx)("a",{disabled:c,onClick:function(){return C("register")},children:"Register"})})]})}),"login"===y&&Object(j.jsx)(m,Object(o.a)(Object(o.a)({},I),{},{onClick:T,primaryText:"Login"})),"register"===y&&Object(j.jsx)(m,Object(o.a)(Object(o.a)({},I),{},{onClick:T,primaryText:"Register"}))]})})},x=function(){return Object(j.jsx)("h1",{className:"is-size-1 mb-5",children:"Page not found!"})},g=n(39),N=(n(70),function(){return Object(j.jsxs)("pwa-install-button",{children:[Object(j.jsxs)("div",{className:"box mt-5 content unclickable",children:[Object(j.jsx)("p",{children:"This app is a PWA (progressive web app) that can be installed directly to your homescreen or desktop. It updates like other apps and provides a native like experience."}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:"Fast"}),Object(j.jsx)("li",{children:"Reliable"}),Object(j.jsx)("li",{children:"Offline First"})]})]}),Object(j.jsx)("button",{className:"button is-primary",children:"Install!"})]})}),w=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],i=t[1],c=Object(u.e)();Object(a.useEffect)((function(){var e=document.getElementById("changelog-path").dataset.path;fetch(e).then((function(e){return e.json()})).then((function(e){var t=Object.keys(e).filter((function(e){return Object(g.a)(e,">".concat("0.1.0"))})).map((function(t){return{version:t,description:e[t].description}}));i(t)}))}),[]);var r=Object(u.f)().updateAvailable;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"is-size-1 mb-5",children:"My Settings"}),Object(j.jsxs)("div",{className:"level mb-5",children:[Object(j.jsx)("div",{className:"level-item has-text-centered",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"heading",children:"Tweets"}),Object(j.jsx)("p",{className:"title",children:"3,456"})]})}),Object(j.jsx)("div",{className:"level-item has-text-centered",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"heading",children:"Following"}),Object(j.jsx)("p",{className:"title",children:"123"})]})}),Object(j.jsx)("div",{className:"level-item has-text-centered",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"heading",children:"Followers"}),Object(j.jsx)("p",{className:"title",children:"456K"})]})}),Object(j.jsx)("div",{className:"level-item has-text-centered",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"heading",children:"Likes"}),Object(j.jsx)("p",{className:"title",children:"789"})]})})]}),Object(j.jsx)("hr",{}),Object(j.jsx)(N,{}),r&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{id:"new-version-refresh-notification",className:"mb-5 mt-5",children:Object(j.jsxs)("div",{className:"notification is-info is-light is-flex is-align-items-center",children:["A new version of DualTrack is available",Object(j.jsx)("div",{className:"button is-light ml-2",id:"new-version-refresh-button",onClick:function(){navigator.serviceWorker.getRegistration().then((function(e){e.waiting&&(console.log("[Posting message from Update interface]"),e.waiting.postMessage({type:"SKIP_WAITING"})),console.log("[Setting update available to false]"),c({type:"TOGGLE_UPDATE_AVAILABLE",updateAvailable:!1})}))},children:"Refresh to Update"})]})}),n&&n.map((function(e){return Object(j.jsxs)("div",{className:"box",children:[Object(j.jsx)("h3",{className:"is-size-3",children:e.version}),Object(j.jsx)("p",{children:e.description})]},e.version)}))]})]})},k=[{path:"/",component:f,isPrivate:!1},{path:"/entrance",component:f,isPrivate:!1},{path:"/dashboard",component:b,isPrivate:!0},{path:"/workouts",component:i.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,83))})),isPrivate:!0},{path:"/settings",component:w,isPrivate:!0},{path:"/*",component:x,isPrivate:!1}],y=n(41),E=function(e){var t=e.component,n=e.path,a=e.isPrivate,i=Object(y.a)(e,["component","path","isPrivate"]),c=Object(u.f)().email;return Object(j.jsx)(l.b,Object(o.a)({path:n,render:function(e){return a&&!Boolean(c)?Object(j.jsx)(l.a,{to:{pathname:"/entrance"}}):Object(j.jsx)(t,Object(o.a)({},e))}},i))},T=function(){var e=Object(u.f)(),t=e.email,n=e.updateAvailable,i=Object(a.useState)(!1),c=Object(p.a)(i,2),r=c[0],o=c[1],d=Object(u.e)(),b=Object(l.g)(),h=Object(l.h)();Object(a.useEffect)((function(){o(!1)}),[h]);var O=function(){Object(u.d)(d),b.push("/entrance"),d({type:"TOGGLE_NOTIFICATION",notification:{text:"Logged out successfully. Come back soon!",type:"info"}})};return Object(j.jsxs)("nav",{className:"navbar is-light",role:"navigation","aria-label":"main navigation",children:[Object(j.jsxs)("div",{className:"navbar-brand",children:[Object(j.jsx)("div",{className:"has-text-primary is-size-3 p-2",children:"DualTrack"}),Object(j.jsxs)("div",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",id:"navbar-burger",onClick:function(){return o(!r)},children:[Object(j.jsx)("span",{"aria-hidden":"true"}),Object(j.jsx)("span",{"aria-hidden":"true"}),Object(j.jsx)("span",{"aria-hidden":"true"})]})]}),Object(j.jsxs)("div",{id:"navbar-menu",className:r?"navbar-menu is-active":"navbar-menu",children:[Object(j.jsx)("div",{className:"navbar-start",children:Boolean(t)&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(s.b,{to:"/dashboard",className:"navbar-item",activeClassName:"is-active",children:"Dashboard"}),Object(j.jsx)(s.b,{to:"/workouts",className:"navbar-item",activeClassName:"is-active",children:"Workouts"}),Object(j.jsxs)(s.b,{to:"/settings",className:"navbar-item",activeClassName:"is-active",children:["Settings",n&&Object(j.jsx)("div",{className:"dot ml-1 has-background-primary"})]}),Object(j.jsx)("div",{className:"navbar-item is-clickable",tabIndex:0,onClick:O,onKeyUp:function(e){return"Enter"===e.key&&O()},children:"Logout"})]})}),Object(j.jsx)("div",{className:"navbar-end",children:Object(j.jsx)("div",{className:"navbar-item",children:Object(j.jsx)("div",{className:"buttons",children:!Boolean(t)&&Object(j.jsx)(s.b,{to:"/entrance",className:"button is-light",activeClassName:"is-active",children:"Login"})})})})]})]})},I=function(){var e=Object(u.e)(),t=Object(u.f)().notification;if(null===t)return null;return Object(j.jsxs)("div",{className:"notification is-".concat(t.type," is-light is-flex is-align-items-center"),children:[Object(j.jsx)("div",{tabIndex:0,className:"delete is-clickable is-size-3",onClick:function(){e({type:"TOGGLE_NOTIFICATION",notification:null})},dangerouslySetInnerHTML:{__html:"&#215;"}}),t.text]})},C=function(){return Object(j.jsx)("div",{className:"loader is-flex is-justify-content-center",children:Object(j.jsx)("div",{className:"spinner-container",children:Object(j.jsx)("div",{className:"spinner"})})})};var A=function(){var e=Object(u.e)();return Object(d.a)((function(t){e({type:"TOGGLE_UPDATE_AVAILABLE",updateAvailable:t})})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{id:"app-container",children:[Object(j.jsx)(T,{}),Object(j.jsx)(I,{}),Object(j.jsx)("div",{className:"container is-widescreen p-5",children:Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(C,{}),children:Object(j.jsx)(l.d,{children:k.map((function(e,t){return Object(j.jsx)(E,Object(o.a)({exact:!0},e),t)}))})})})]}),Object(j.jsx)("footer",{className:"has-background-white-ter",children:Object(j.jsx)("div",{className:"content has-text-centered pt-3 pb-3",children:Object(j.jsxs)("div",{children:["Icons made by ",Object(j.jsx)("a",{href:"https://www.flaticon.com/authors/srip",title:"srip",children:"srip"})," from ",Object(j.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})})})]})};function S(e,t){var n;!function(){L.apply(this,arguments)}(),navigator.serviceWorker.register(e).then((function(e){console.log("[Registering SW]: ",e),e.waiting&&e.waiting.state,e.onupdatefound=function(){null!==(n=e.installing)&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller||(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function L(){return(L=Object(v.a)(O.a.mark((function e(){var t,n,a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=7;break}return e.next=3,navigator.serviceWorker.getRegistration();case 3:n=e.sent,a=n&&n.active,i=a&&a.state,navigator.serviceWorker.addEventListener("controllerchange",Object(v.a)(O.a.mark((function e(){var n,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,navigator.serviceWorker.getRegistration();case 4:n=e.sent,a=n&&n.active,c=a&&a.state,"activated"===i&&"activating"===c&&(t=!0,window.location.reload());case 8:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,82)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(u.a,{children:Object(j.jsx)(s.a,{hashType:"slash",children:Object(j.jsx)(A,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dual_track_frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dual_track_frontend","/service-worker.js");_?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):S(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):S(t,e)}))}}(),P()}},[[79,1,2]]]);
//# sourceMappingURL=main.ae6a97dc.chunk.js.map