(this.webpackJsonpdual_track_frontend=this.webpackJsonpdual_track_frontend||[]).push([[4],{110:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(107),s=n(19),i=n(20),r=n(21),o=n(22),l=n(1),u=n(108),d=n.n(u),b=n(30),h=n(6),j=n.n(h),m=n(10),f=n(12),v=n(0),O=function(){var e=Object(l.useState)(null),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(l.useState)(!1),s=Object(f.a)(a,2),i=s[0],r=s[1];if(!("wakeLock"in navigator))return null;var o=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.wakeLock.request("screen");case 3:t=e.sent,c(t),r(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("".concat(e.t0.name,", ").concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){n&&n.release(),c(null),r(!1)};return Object(v.jsx)(v.Fragment,{children:i?Object(v.jsx)("div",{className:"button",tabIndex:"0",onClick:u,onKeyUp:function(e){return"Enter"===e.key&&u()},children:"Unlock Page"}):Object(v.jsx)("div",{className:"button",tabIndex:"0",onClick:o,onKeyUp:function(e){return"Enter"===e.key&&o()},children:"Lock Page"})})},p=function(){var e=Object(l.useState)(!!document.fullscreenElement),t=Object(f.a)(e,2),n=t[0],c=t[1],a=function(){document.documentElement.requestFullscreen(),c(!0)},s=function(){document.exitFullscreen(),c(!1)};return Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)("div",{className:"button",tabIndex:"0",onClick:s,onKeyUp:function(e){return"Enter"===e.key&&s()},children:"Leave Full Screen"}):Object(v.jsx)("div",{className:"button",tabIndex:"0",onClick:a,onKeyUp:function(e){return"Enter"===e.key&&a()},children:"Enter Full Screen"})})};function x(e){var t=e/36e5,n=60*(t-Math.floor(t)),c=Math.floor(n),a=60*(n-c),s=Math.floor(a),i=100*(a-s),r=Math.floor(i),o=c.toString().padStart(2,"0"),l=s.toString().padStart(2,"0"),u=r.toString().padStart(2,"0");return"".concat(o,":").concat(l,":").concat(u)}var y=function(e){var t=e.showReset,n=void 0===t||t,c=e.onPlayCallback,a=void 0===c?function(){}:c,s=e.onStopCallback,i=void 0===s?function(){}:s,r=Object(l.useState)(!1),o=Object(f.a)(r,2),u=o[0],d=o[1],b=Object(l.useState)(null),h=Object(f.a)(b,2),j=h[0],m=h[1],O=Object(l.useState)(0),p=Object(f.a)(O,2),y=p[0],g=p[1],k=Object(l.useState)(null),N=Object(f.a)(k,2),w=N[0],S=N[1],C=function(){u?(clearInterval(w),i()):(m(Date.now()-y),a()),d(!u)};Object(l.useEffect)((function(){if(null===j)clearInterval(w),S(null),g(0);else{var e=setInterval((function(){g(null===j?0:Date.now()-j)}),10);S(e)}}),[j]);var E=function(){m(null),d(!1)};return Object(v.jsxs)("div",{className:"box has-text-centered is-flex is-flex-direction-column is-align-items-center",children:[Object(v.jsx)("h2",{className:"is-size-2 mb-3",children:"Stopwatch"}),Object(v.jsx)("div",{className:"stopwatch-circle circle is-flex is-justify-content-center is-align-items-center",children:Object(v.jsx)("span",{className:"time is-size-2",id:"display",children:y?x(y):"00:00:00"})}),Object(v.jsxs)("div",{className:"mt-3 is-flex is-justify-content-space-between",children:[Object(v.jsx)("img",{className:"is-clickable mr-5",tabIndex:0,id:"main-action-button",alt:u?"pause stopwatch":"start stopwatch",src:u?"https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/pause-button_pinhpy.svg":"https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/play-button_opkxmt.svg",onClick:C,onKeyUp:function(e){return"Enter"===e.key&&C()}}),n&&Object(v.jsx)("img",{className:"is-clickable",tabIndex:0,id:"reset-button",alt:"reset stopwatch",src:"https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/reset-button_mdv6wf.svg",onClick:E,onKeyUp:function(e){return"Enter"===e.key&&E()}})]})]})},g=function(e){var t=e.channel,n=e.chatHistory,c=e.setChatHistory,s=Object(l.useState)(!1),i=Object(f.a)(s,2),r=i[0],o=i[1],u=Object(l.useState)(!1),d=Object(f.a)(u,2),b=d[0],h=d[1],j=Object(l.useState)(""),m=Object(f.a)(j,2),O=m[0],p=m[1];if(Object(l.useEffect)((function(){!r&&n.length&&h(!0);var e=document.getElementById("last-chat-element");e&&e.scrollIntoView()}),[n,r]),Object(l.useEffect)((function(){var e=function(e){27===e.keyCode&&o(!1)};r?document.addEventListener("keydown",e,!1):document.removeEventListener("keydown",e,!1)}),[r]),!t)return null;var x=function(){r?document.body.classList.remove("not-vertically-scrollable"):document.body.classList.add("not-vertically-scrollable"),o(!r)},y=function(){document.body.classList.remove("not-vertically-scrollable"),o(!1)},g=function(){if(O&&O.length){var e={id:n.length+1,sender:"me",message:O,timestamp:Date.now()};t.trigger("client-chat-message",e),c([].concat(Object(a.a)(n),[e])),p("")}};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"button",tabIndex:0,onClick:x,onKeyUp:function(e){return"Enter"===e.key&&x()},children:["Workout Chat",b&&Object(v.jsx)("div",{className:"dot ml-1 has-background-primary"})]}),r&&Object(v.jsxs)("div",{className:"chat-interface box has-background-link-light p-5",children:[Object(v.jsx)("div",{tabIndex:0,className:"delete is-clickable is-size-3 close-chat-interface",onClick:y,onKeyUp:function(e){return"Enter"===e.key&&y()},dangerouslySetInnerHTML:{__html:"&#215;"}}),Object(v.jsx)("h4",{className:"chat-title is-size-4",children:"Workout Chat"}),Object(v.jsxs)("div",{className:"chat-messages box mt-2 p-3",children:[Object(v.jsx)("div",{className:"is-full-width is-flex is-justify-content-center mb-1",children:Object(v.jsx)("div",{className:"tag is-dark from-me-message",children:"This is the beginning of your conversation history"})}),n.map((function(e,t){return"me"===e.sender?Object(v.jsx)("div",{className:"is-full-width is-flex is-justify-content-flex-end mb-1",children:Object(v.jsx)("div",{className:"tag is-link from-me-message is-pulled-right",children:e.message})},"chat-me-".concat(t)):Object(v.jsx)("div",{className:"mb-1",children:Object(v.jsx)("div",{className:"tag is-light to-me-message",children:e.message})},"chat-others-".concat(t))})),Object(v.jsx)("div",{id:"last-chat-element"})]}),Object(v.jsx)("div",{className:"chat-send-box box mt-2 p-3",children:Object(v.jsxs)("div",{className:"is-flex",children:[Object(v.jsx)("input",{className:"input is-normal",type:"text",placeholder:"Enter your message",value:O,onChange:function(e){return p(e.target.value)},onKeyUp:function(e){return"Enter"===e.key&&g()}}),Object(v.jsx)("div",{className:"button is-primary ml-2",tabIndex:0,onClick:g,disabled:!O||!O.length,children:"Send"})]})})]})]})},k=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).setChatHistory=function(t){e.setState({chatHistory:t})},e.state={chatHistory:[]};return d.a.logToConsole=false,e.pusher=new d.a("cebc878343c66e63a78e",{cluster:"us3",authEndpoint:"".concat(b.a,"/pusher/auth"),auth:{headers:{Authorization:localStorage.getItem("currentUserToken")||""}}}),e.channel=e.pusher.subscribe("private-workoutChannel-".concat("a230a1de-3907-4e6d-b527-edf48dc6f664")),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.channel.bind("client-chat-message",(function(t){e.setState({chatHistory:[].concat(Object(a.a)(e.state.chatHistory),[Object(c.a)(Object(c.a)({},t),{},{sender:"other"})])})}),this)}},{key:"componentWillUnmount",value:function(){this.channel&&this.channel.unbind("client-chat-message"),this.pusher.unsubscribe("private-workoutChannel-".concat("a230a1de-3907-4e6d-b527-edf48dc6f664"))}},{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"",children:[Object(v.jsx)("h1",{className:"is-size-1 mb-5",children:"My Workouts"}),Object(v.jsxs)("div",{className:"buttons",children:[Object(v.jsx)(O,{}),Object(v.jsx)(p,{})]}),Object(v.jsx)(y,{}),Object(v.jsx)(g,{channel:this.channel,chatHistory:this.state.chatHistory,setChatHistory:this.setChatHistory})]})})}}]),n}(l.Component);t.default=k}}]);
//# sourceMappingURL=4.099b2df1.chunk.js.map