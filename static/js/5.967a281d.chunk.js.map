{"version":3,"sources":["Pages/Workout/LockScreen.jsx","Pages/Workout/FullScreen.jsx","Config/utils.js","Components/Stopwatch.jsx","Pages/Workout/ChatMembers.jsx","Pages/Workout/ChatInterface.jsx","Pages/Workout/ChatBubble.jsx","Pages/Workout/WorkoutDetail.jsx","Pages/Workout/index.jsx"],"names":["LockScreen","useState","screenLock","setScreenLock","locked","setLockedStatus","navigator","requestWakeLock","a","wakeLock","request","lock","console","error","name","message","releaseWakeLock","release","className","tabIndex","onClick","onKeyUp","e","key","FullScreen","document","fullscreenElement","inFullScreen","setScreenStatus","enterFullScreen","documentElement","requestFullscreen","leaveFullScreen","exitFullscreen","timeToString","time","diffInHrs","diffInMin","Math","floor","mm","diffInSec","ss","diffInMs","ms","formattedMM","toString","padStart","formattedSS","formattedMS","StopWatch","showReset","onPlayCallback","onStopCallback","playing","setPlaying","startTime","setTime","elapsedTime","setElapsedTime","timerInterval","setTimerInterval","handleMainAction","clearInterval","Date","now","useEffect","interval","setInterval","handleReset","id","alt","src","ChatMembers","members","email","useAuthState","count","Object","values","map","member","tagType","ChatInterface","open","chatHistory","closeChat","setMessage","sendMessage","length","dangerouslySetInnerHTML","__html","chat","index","sender","type","placeholder","value","onChange","target","disabled","ChatBubble","showChat","channel","setChatHistory","unreadMessage","setUnreadStatus","setOpenStatus","lastElement","getElementById","scrollIntoView","escFunction","keyCode","openChat","addEventListener","removeEventListener","body","classList","remove","add","formattedMessage","timestamp","trigger","WorkoutDetail","props","history","setState","status","state","Pusher","logToConsole","process","pusher","cluster","authEndpoint","auth","headers","localStorage","getItem","subscribe","identifier","this","selectedWorkout","bind","info","newMembers","keys","filter","reduce","obj","data","unsubscribe","unbind","Component","Workout","match","params","loading","dispatch","useAuthDispatch","getWorkout","Loader","aria-label","to"],"mappings":"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","file":"static/js/5.967a281d.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nconst LockScreen = () => {\n  const [screenLock, setScreenLock] = useState(null);\n  const [locked, setLockedStatus] = useState(false);\n\n  if (!('wakeLock' in navigator)) {\n    // Screen Wake Lock API is not supported ðŸŽ‰\n    // - Need to be running the server in HTTPS mode\n    return null;\n  }\n\n  // Function that attempts to request a screen wake lock.\n  const requestWakeLock = async () => {\n    try {\n      const lock = await navigator.wakeLock.request('screen');\n      setScreenLock(lock);\n      setLockedStatus(true);\n    } catch (err) {\n      console.error(`${err.name}, ${err.message}`);\n    }\n  };\n  const releaseWakeLock = () => {\n    if (screenLock) screenLock.release();\n\n    setScreenLock(null);\n    setLockedStatus(false);\n  };\n\n  return (\n    <>\n      {locked ? (\n        <div className='button' tabIndex='0' onClick={releaseWakeLock} onKeyUp={(e) => e.key === 'Enter' && releaseWakeLock()}>\n          Unlock Page\n        </div>\n      ) : (\n        <div className='button' tabIndex='0' onClick={requestWakeLock} onKeyUp={(e) => e.key === 'Enter' && requestWakeLock()}>\n          Lock Page\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default LockScreen;\n","import React, { useState } from 'react';\n\nconst FullScreen = () => {\n  const [inFullScreen, setScreenStatus] = useState(!!document.fullscreenElement);\n\n  const enterFullScreen = () => {\n    document.documentElement.requestFullscreen();\n    setScreenStatus(true);\n  };\n  const leaveFullScreen = () => {\n    document.exitFullscreen();\n    setScreenStatus(false);\n  };\n\n  return (\n    <>\n      {inFullScreen ? (\n        <div className='button' tabIndex='0' onClick={leaveFullScreen} onKeyUp={(e) => e.key === 'Enter' && leaveFullScreen()}>\n          Leave Full Screen\n        </div>\n      ) : (\n        <div className='button' tabIndex='0' onClick={enterFullScreen} onKeyUp={(e) => e.key === 'Enter' && enterFullScreen()}>\n          Enter Full Screen\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default FullScreen;\n","// SVG Icon Links\nexport const pauseButtonSrc = 'https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/pause-button_pinhpy.svg';\nexport const playButtonSrc = 'https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/play-button_opkxmt.svg';\nexport const resetButtonSrc = 'https://res.cloudinary.com/https-tinloof-com/image/upload/v1593360448/blog/time-in-js/reset-button_mdv6wf.svg';\n\n// Convert time to a format of hours, minutes, seconds, and milliseconds\nexport function timeToString(time) {\n  let diffInHrs = time / 3600000;\n  let hh = Math.floor(diffInHrs);\n\n  let diffInMin = (diffInHrs - hh) * 60;\n  let mm = Math.floor(diffInMin);\n\n  let diffInSec = (diffInMin - mm) * 60;\n  let ss = Math.floor(diffInSec);\n\n  let diffInMs = (diffInSec - ss) * 100;\n  let ms = Math.floor(diffInMs);\n\n  let formattedMM = mm.toString().padStart(2, \"0\");\n  let formattedSS = ss.toString().padStart(2, \"0\");\n  let formattedMS = ms.toString().padStart(2, \"0\");\n\n  return `${formattedMM}:${formattedSS}:${formattedMS}`;\n}\n","import React, { useEffect, useState } from 'react';\nimport { pauseButtonSrc, playButtonSrc, resetButtonSrc, timeToString } from '../Config/utils';\n\nconst StopWatch = ({ showReset = true, onPlayCallback = () => {}, onStopCallback = () => {} }) => {\n  const [playing, setPlaying ] = useState(false);\n  const [startTime, setTime ] = useState(null);\n  const [elapsedTime, setElapsedTime ] = useState(0);\n  const [timerInterval, setTimerInterval ] = useState(null);\n\n  const handleMainAction = () => {\n    if (!playing) {\n      setTime(Date.now() - elapsedTime);\n      onPlayCallback();\n    } else {\n      clearInterval(timerInterval);\n      onStopCallback();\n    }\n\n    setPlaying(!playing);\n  };\n\n  useEffect(() => {\n    // With react hooks, we can't set a callback after\n    // calling setState on a state variable. To get around this,\n    // we setup an effect that triggers when startTime is changed\n    if (startTime === null) {\n      clearInterval(timerInterval);\n      setTimerInterval(null);\n      setElapsedTime(0);\n    } else {\n      const interval = setInterval(function(){\n        if (startTime === null) {\n          setElapsedTime(0);\n        } else {\n          setElapsedTime(Date.now() - startTime);\n        }\n      }, 10);\n      setTimerInterval(interval);\n    }\n  }, [startTime]); // eslint-disable-line\n\n  const handleReset = () => {\n    setTime(null);\n    setPlaying(false);\n  };\n\n  return (\n    <div className='box has-text-centered is-flex is-flex-direction-column is-align-items-center'>\n      <h2 className='is-size-2 mb-3'>Stopwatch</h2>\n      <div className='stopwatch-circle circle is-flex is-justify-content-center is-align-items-center'>\n        <span className='time is-size-2' id='display'>\n          {elapsedTime ? timeToString(elapsedTime) : '00:00:00'}\n        </span>\n      </div>\n\n      <div className='mt-3 is-flex is-justify-content-space-between'>\n        <img\n          className='is-clickable mr-5'\n          tabIndex={0}\n          id='main-action-button'\n          alt={playing ? 'pause stopwatch' : 'start stopwatch'}\n          src={playing ? pauseButtonSrc : playButtonSrc}\n          onClick={handleMainAction}\n          onKeyUp={(e) => e.key === 'Enter' && handleMainAction()}\n        />\n\n        {showReset && (\n          <img\n            className='is-clickable'\n            tabIndex={0}\n            id='reset-button'\n            alt='reset stopwatch'\n            src={resetButtonSrc}\n            onClick={handleReset}\n            onKeyUp={(e) => e.key === 'Enter' && handleReset()}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default StopWatch;\n","import React from 'react';\nimport { useAuthState } from '../../Context';\n\nconst ChatMembers = ({ members }) => {\n  const { email } = useAuthState();\n  if (!members || members.count < 2) return null;\n\n  return (\n    <h5 className='chat-title is-size-5'>\n      People in Chat\n\n      <br/>\n\n      {Object.values(members).map(member => {\n        const tagType = member.email === email ? 'is-link' : 'is-light';\n        return (\n          <div key={member.email} className={`tag ${tagType}`}>{member.email}</div>\n        );\n      })}\n    </h5>\n  );\n};\n\nexport default ChatMembers;\n","import React from 'react';\nimport { useAuthState } from '../../Context';\nimport ChatMembers from './ChatMembers';\n\nconst ChatInterface = ({ open, members, chatHistory, closeChat, message, setMessage, sendMessage }) => {\n  const { email } = useAuthState();\n\n  if (!open || !members || Object.values(members).length < 2) {\n    return null;\n  }\n\n  return (\n    <div className='chat-interface box has-background-link-light p-5'>\n      <div\n        tabIndex={0}\n        className='delete is-clickable is-size-3 close-chat-interface'\n        onClick={closeChat}\n        onKeyUp={(e) => e.key === 'Enter' && closeChat()}\n        dangerouslySetInnerHTML={{ __html: '&#215;' }}\n      />\n\n      <ChatMembers members={members} />\n\n      <div className='chat-messages box mt-2 p-3'>\n        <div className='is-full-width is-flex is-justify-content-center mb-4'>\n          <div className='tag is-dark'>This is the beginning of your conversation history</div>\n        </div>\n\n        {chatHistory.map((chat, index) => {\n          if (chat.sender === email) {\n            return (\n              <div className='is-full-width is-flex is-justify-content-flex-end mb-2' key={`chat-me-${index}`}>\n                <div className='tag is-medium is-link from-me-message is-pulled-right'>{chat.message}</div>\n              </div>\n            );\n          }\n\n          return (\n            <div className='mb-2' key={`chat-others-${index}`}>\n              <div className='tag is-medium is-light to-me-message'>{chat.message}</div>\n            </div>\n          );\n        })}\n\n        <div id='last-chat-element'></div>\n      </div>\n\n      <div className='chat-send-box box mt-2 p-3'>\n        <div className='is-flex'>\n          <input\n            className='input is-normal'\n            type='text'\n            placeholder='Enter your message'\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onKeyUp={(e) => e.key === 'Enter' && sendMessage()}\n          />\n\n          <div className='button is-primary ml-2' tabIndex={0} onClick={sendMessage} disabled={!message || !message.length}>\n            Send\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;\n","import React, { useState, useEffect } from 'react';\nimport { useAuthState } from '../../Context';\nimport ChatInterface from './ChatInterface';\n\nconst ChatBubble = ({ showChat, channel, chatHistory, setChatHistory, unreadMessage, setUnreadStatus, members }) => {\n  const [open, setOpenStatus] = useState(false);\n  const [message, setMessage] = useState('');\n  const { email } = useAuthState();\n\n  useEffect(() => {\n    const lastElement = document.getElementById('last-chat-element');\n    if (lastElement) {\n      lastElement.scrollIntoView();\n    }\n  }, [chatHistory, open]);\n\n  useEffect(() => {\n    const escFunction = (e) => {\n      if (e.keyCode !== 27) return;\n\n      openChat(false);\n    };\n\n    if (open) {\n      document.addEventListener('keydown', escFunction, false);\n    } else {\n      document.removeEventListener('keydown', escFunction, false);\n    }\n  }, [open]);  // eslint-disable-line\n\n  if (!channel || !showChat) return null;\n\n  const openChat = () => {\n    if (open) {\n      document.body.classList.remove('not-vertically-scrollable');\n    } else {\n      setUnreadStatus(false);\n      document.body.classList.add('not-vertically-scrollable');\n    }\n\n    setOpenStatus(!open);\n  };\n\n  const closeChat = () => { openChat(false) };\n\n  const sendMessage = () => {\n    if (!message || !message.length) return;\n\n    const formattedMessage = {\n      id: chatHistory.length + 1,\n      sender: email,\n      message,\n      timestamp: Date.now()\n    };\n\n    // Send message to others in the channel\n    channel.trigger('client-chat-message', formattedMessage);\n    setChatHistory([ ...chatHistory, formattedMessage ]);\n\n    setMessage('');\n  };\n\n  return (\n    <>\n      <button\n        className='button'\n        tabIndex={0}\n        onClick={openChat}\n        disabled={Object.values(members).length < 2}\n        onKeyUp={(e) => e.key === 'Enter' && openChat()}\n      >\n        Workout Chat\n        {unreadMessage && <div className='dot ml-1 has-background-primary'></div>}\n      </button>\n\n      {Object.values(members).length < 2 && <div className='mt-2'>Waiting for others to join the workout :)</div>}\n\n      <ChatInterface\n        open={open}\n        members={members}\n        chatHistory={chatHistory}\n        closeChat={closeChat}\n        message={message}\n        setMessage={setMessage}\n        sendMessage={sendMessage}\n      />\n    </>\n  );\n};\n\nexport default ChatBubble;\n","import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport LockScreen from './LockScreen';\nimport FullScreen from './FullScreen';\nimport StopWatch from '../../Components/Stopwatch';\nimport ChatBubble from './ChatBubble';\n\nclass WorkoutDetail extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chatHistory: [],\n      unreadMessage: false,\n      members: [],\n      showChat: false\n    };\n\n    // Enable pusher logging - not enabled in any environment except local\n    const isLocal = process.env.NODE_ENV === 'development';\n    Pusher.logToConsole = isLocal;\n\n    this.pusher = new Pusher(process.env.REACT_APP_PUSHER_KEY, {\n      cluster: process.env.REACT_APP_PUSHER_CLUSTER,\n      authEndpoint: `${process.env.REACT_APP_ROOT_URL}/pusher/auth`,\n      auth: {\n        headers: { 'Authorization': localStorage.getItem('currentUserToken') || '' }\n      }\n    });\n\n    this.channel = this.pusher.subscribe(`presence-workoutChannel-${this.identifier}`);\n  }\n\n  get identifier() {\n    const { identifier } = this.props.selectedWorkout;\n    return identifier;\n  }\n\n  componentDidMount() {\n    this.channel.bind('pusher:subscription_succeeded', function(info) {\n      this.setState({ members: info.members, showChat: true });\n    }, this);\n\n    this.channel.bind('pusher:member_added', function(member) {\n      const newMembers = {\n        ...this.state.members,\n        [member.id]: member.info\n      }\n      this.setState({ members: newMembers });\n    }, this);\n\n    this.channel.bind('pusher:member_removed', function(member) {\n      const newMembers = Object.keys(this.state.members)\n        .filter(key => `${key}` !== `${member.id}`)\n        .reduce((obj, key) => {\n          obj[key] = this.state.members[key];\n          return obj;\n        }, {});\n\n      this.setState({ members: newMembers });\n    }, this);\n\n    this.channel.bind('client-chat-message', (data) => {\n      this.setState({\n        chatHistory: [\n          ...this.state.chatHistory,\n          {\n            ...data\n          }\n        ],\n        unreadMessage: true\n      });\n    }, this);\n  }\n\n  componentWillUnmount() {\n    this.pusher.unsubscribe(`presence-workoutChannel-${this.identifier}`);\n\n    if (this.channel) {\n      this.channel.unbind();\n    }\n\n    document.body.classList.remove('not-vertically-scrollable');\n  }\n\n  setChatHistory = (history) => {\n    this.setState({ chatHistory: history });\n  }\n\n  setUnreadStatus = (status) => {\n    this.setState({ unreadMessage: status });\n  }\n\n  render() {\n    return (\n      <>\n        <div className='buttons'>\n          <LockScreen />\n          <FullScreen />\n        </div>\n\n        <StopWatch />\n\n        <ChatBubble\n          channel={this.channel}\n          setChatHistory={this.setChatHistory}\n          setUnreadStatus={this.setUnreadStatus}\n          {...this.state}\n        />\n      </>\n    );\n  }\n}\n\nexport default WorkoutDetail;\n","import React, { useEffect } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport Loader from '../../Components/Loader';\nimport { useAuthDispatch, useAuthState } from '../../Context';\nimport { getWorkout } from '../../Context/actions';\nimport WorkoutDetail from './WorkoutDetail';\n\nconst Workout = ({ match }) => {\n  const { params: { identifier } } = match;\n  const { selectedWorkout, error, loading } = useAuthState();\n  const dispatch = useAuthDispatch();\n  useEffect(() => {\n    getWorkout(identifier, dispatch);\n  }, [identifier, dispatch]);\n\n  if (loading) {\n    return <Loader />;\n  } else if (!selectedWorkout || !Object.keys(selectedWorkout).length) {\n    return (\n      <div className='has-text-centered'>\n        <h1 className='is-size-3'>{error}</h1>\n        <NavLink to='/workouts' className='button mt-3'>Return to My Workouts</NavLink>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <nav className='breadcrumb' aria-label='breadcrumbs'>\n        <ul>\n          <li>\n            <NavLink to='/workouts' className=''>Workouts</NavLink>\n          </li>\n          <li className='is-active'>\n            <div className='ml-3'>{selectedWorkout.name}</div>\n          </li>\n        </ul>\n      </nav>\n\n      <WorkoutDetail selectedWorkout={selectedWorkout} />\n    </>\n  );\n}\n\nexport default Workout;\n"],"sourceRoot":""}